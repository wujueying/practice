# 三次握手和四次挥手

## 三次握手
刚开始的时候，客户端处于closed状态，服务器处于listen状态。
1. 第一次握手：客户端给服务端发送一个SYN报文，并指明客户端的初始化序列号ISN(c),此时客户端处于SYN_SEND状态。
2. 第二次握手：服务器收到客户端的SYN报文之后，会以自己的SYN报文作为应答，并且指定自己的初始化序列号ISN(s),同时会将自己的客户端的ISN+1的值作为ACK的值，表示自己已经收到了客户端的SYN，此时服务器处于SYN_SEND的状态。
3. 第三次握手：客户端收到SYN报文之后，会发送一个ACK报文，当然，也是一样把服务器的ISN+1作为ACK的值，表示收到了服务端的SYN报文，客户端处于established状态。

服务器收到ACK报文之后，也处于established状态，这样，双方建立起了连接。

**为什么三次握手?**
第一次握手客户端发包，服务器接收，所以服务了解到客户端的发送和自己的接收能力没有问题，第二次服务器发送，客户端接收，客户端了解到自己的发送和接收能力没有问题，服务器的发送和接收能力也没有问题，但是此时服务端不知道自己的发送能力和客户端的接收能力有没有问题，所以要进行第三次握手。

## 四次挥手
刚开始，双方都处于established的状态